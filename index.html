<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Snap-on 小小知識王</title>

  <style>
    :root{ --w: min(920px, 94vw); }
    html, body { height: 100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Noto Sans TC", Segoe UI, Roboto, Arial, "Helvetica Neue", Helvetica, "微軟正黑體", sans-serif;
      color:#e5e7eb;
      /* ✅ 背景圖改為 assets/01.png */
      background: #0f172a url('assets/01.png') center/cover no-repeat fixed;
    }
    /* 背景遮罩，讓文字更清楚 */
    body::before{
      content:"";
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.45);
      z-index:-1;
    }

    header{ max-width:var(--w); margin:30px auto 10px; padding:0 8px; }
    h1{ margin:0; font-size: clamp(24px, 5vw, 38px); letter-spacing:.5px; }
    p.sub{ margin:6px 0 0; color:#cbd5e1; }

    main{ max-width:var(--w); margin: 10px auto 60px; padding:16px; }

    .card{
      background:#0b1220cc;
      border:1px solid #1f2937;
      border-radius:18px;
      padding:18px;
      margin:14px 0;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
    }

    .meta{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      color:#cbd5e1;
      font-size:14px;
    }
    .pill{
      background:#111827cc;
      padding:6px 12px;
      border-radius:999px;
      border:1px solid #334155;
    }

    .q{
      font-weight:800;
      font-size:20px;
      margin:6px 0 12px;
    }

    .choices{
      display:grid;
      grid-template-columns:1fr;
      gap:12px;
    }
    .choices button{
      text-align:left;
      border:1px solid #334155;
      background:#0f172a;
      color:#e5e7eb;
      padding:12px 14px;
      border-radius:12px;
      cursor:pointer;
      transition: transform .02s ease-in, border-color .15s ease;
    }
    .choices button:hover{
      transform: translateY(-1px);
      border-color:#60a5fa;
    }
    .choices button.selected{
      border-color:#60a5fa;
      box-shadow:0 0 0 3px rgba(96,165,250,.25) inset;
    }

    .controls{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      margin-top:14px;
    }
    .btn{
      background:#2563eb;
      color:white;
      border:none;
      padding:12px 16px;
      border-radius:12px;
      cursor:pointer;
      font-weight:700;
    }
    .btn.ghost{
      background:transparent;
      border:1px solid #334155;
      color:#e5e7eb;
    }

    .result{
      padding:16px;
      border-radius:12px;
      background:#052e16;
      border:1px solid #14532d;
      color:#bbf7d0;
    }

    .small{ font-size:12px; color:#94a3b8; }

    footer{
      max-width:var(--w);
      margin: 0 auto 30px;
      padding:0 8px;
      color:#cbd5e1;
      font-size:12px;
    }

    .corner-gif{
      position:fixed;
      top:12px;
      left:12px;
      width:96px;
      z-index:10;
      pointer-events:none;
      border-radius:12px;
    }
  </style>
</head>
<body>
  <!-- 左上角 GIF，可自行更換檔案 -->
  <img class="corner-gif" src="assets/Snap Spark Sticker by Snap-on Tools.gif" alt="Snap-on spark sticker" />

  <header>
    <h1>Snap-on 小小知識王</h1>
    <p class="sub">測試看看你對 Snap-on 工具的了解程度</p>
  </header>

  <main>
    <!-- 上方 HUD：進度 / 得分 / 計時 -->
    <div class="meta card" id="hud">
      <span id="progress" class="pill">第 1/6 題</span>
      <span id="score" class="pill">得分：0</span>
      <span id="timer" class="pill">00:00</span>
    </div>

    <!-- 題目區 -->
    <div id="quiz"></div>

    <!-- 下方控制按鈕 -->
    <div class="controls">
      <button id="prev" class="btn ghost" disabled>上一題</button>
      <div style="flex:1"></div>
      <button id="next" class="btn">下一題</button>
      <button id="finish" class="btn" style="display:none">交卷</button>
    </div>

    <!-- 交卷後成績顯示 -->
    <div id="summary" style="margin-top:16px"></div>
  </main>

  <footer>
    <p class="small">
      提示：題目可以在程式碼中
      <code>const QUESTIONS = [...]</code> 自行修改；背景圖檔放在
      <code>assets/01.png</code>。
    </p>
  </footer>

<script>
/********************
 * 1) 題庫（示範：6 題）
 *    想改題目就改這裡
 ********************/
const QUESTIONS = [
  {
    q:'GitHub Pages 主要用途是？',
    options:['部署靜態網站','當資料庫用','寄發電子報','執行雲端函式'],
    answer:0,
    explain:'Pages 會把 HTML/CSS/JS 公開成網站。'
  },
  {
    q:'下列何者不是 Git 基本動作？',
    options:['commit','push','pull','compile'],
    answer:3,
    explain:'compile 是編譯，Git 動作不是它。'
  },
  {
    q:'建立新分支常用指令？',
    options:['git branch 新分支名','git make branch','git split','git new'],
    answer:0,
    explain:'例如：git branch feature-x。'
  },
  {
    q:'README.md 通常使用哪種語法？',
    options:['Markdown','LaTeX','CSV','SQL'],
    answer:0,
    explain:'GitHub README 預設採 Markdown。'
  },
  {
    q:'想把程式變更上傳到遠端，需使用？',
    options:['git push','git add remote','git upload','git send'],
    answer:0,
    explain:'本地 commit 後用 git push 上傳。'
  },
  {
    q:'Issues 適合用來？',
    options:['追蹤問題/需求','佈署靜態網站','儲存二進位檔','執行排程器'],
    answer:0,
    explain:'Issues 用來協作追蹤 bug / 任務。'
  },
];

/********************
 * 2) 狀態與設定
 ********************/
let state = {
  idx: 0,
  score: 0,
  selected: {},  // 每題選哪一個 index
  startAt: Date.now(),
  finished: false,
};

const POINTS_PER_Q = 1; // 每題配分

/********************
 * 3) DOM 快捷選取 + 工具函式
 ********************/
const $  = (s)=>document.querySelector(s);
const quizEl     = $('#quiz');
const progressEl = $('#progress');
const scoreEl    = $('#score');
const timerEl    = $('#timer');
const prevBtn    = $('#prev');
const nextBtn    = $('#next');
const finishBtn  = $('#finish');
const summaryEl  = $('#summary');

function formatTime(sec){
  const m = Math.floor(sec/60).toString().padStart(2,'0');
  const s = Math.floor(sec%60).toString().padStart(2,'0');
  return `${m}:${s}`;
}

/********************
 * 4) 繪製題目畫面
 ********************/
function render(){
  const total = QUESTIONS.length;

  // 更新 HUD
  progressEl.textContent = `第 ${state.idx+1}/${total} 題`;
  scoreEl.textContent    = `得分：${state.score}`;
  prevBtn.disabled       = state.idx === 0;
  nextBtn.style.display  = state.idx < total-1 ? 'inline-block' : 'none';
  finishBtn.style.display= state.idx === total-1 ? 'inline-block' : 'none';

  const q = QUESTIONS[state.idx];
  quizEl.innerHTML = '';

  const card = document.createElement('div');
  card.className = 'card';

  const qEl = document.createElement('div');
  qEl.className = 'q';
  qEl.textContent = q.q;
  card.appendChild(qEl);

  const choices = document.createElement('div');
  choices.className = 'choices';

  q.options.forEach((opt, i) => {
    const btn = document.createElement('button');
    btn.textContent = `${'ABCD'[i]}. ${opt}`;

    const sel = state.selected[state.idx];
    if (sel === i) btn.classList.add('selected');

    btn.addEventListener('click', () => {
      state.selected[state.idx] = i;
      render();
    });

    choices.appendChild(btn);
  });

  card.appendChild(choices);
  quizEl.appendChild(card);
}

/********************
 * 5) 交卷計算成績（只顯示總分數）
 ********************/
function grade(){
  let score = 0;

  QUESTIONS.forEach((q, i) => {
    const sel = state.selected[i];
    if (sel === q.answer) {
      score += POINTS_PER_Q;
    }
  });

  state.score    = score;
  state.finished = true;

  const maxScore = QUESTIONS.length * POINTS_PER_Q;
  const percent  = Math.round((score / maxScore) * 100);
  const used     = Math.round((Date.now() - state.startAt) / 1000);

  // ✅ 只顯示總分數 + 作答時間
  summaryEl.innerHTML = `
    <div class="result">
      <strong>成績</strong>：${score} / ${maxScore}（${percent}%）<br>
      <strong>作答時間</strong>：${formatTime(used)}
    </div>
  `;

  // 捲到成績區
  window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
}

/********************
 * 6) 事件與初始化
 ********************/
prevBtn.addEventListener('click', () => {
  if (state.idx > 0) {
    state.idx--;
    render();
  }
});

nextBtn.addEventListener('click', () => {
  if (state.idx < QUESTIONS.length - 1) {
    state.idx++;
    render();
  }
});

finishBtn.addEventListener('click', grade);

// 計時器
setInterval(() => {
  if (state.finished) return;
  const sec = (Date.now() - state.startAt) / 1000;
  timerEl.textContent = formatTime(sec);
}, 1000);

// 初次畫面
render();
</script>
</body>
</html>
